<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Container With Most Water - Visualization</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f4f9;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: #333;
        }

        h1 { margin-bottom: 10px; }
        
        .container {
            position: relative;
            height: 350px;
            width: 800px;
            display: flex;
            align-items: flex-end;
            justify-content: space-between;
            border-bottom: 4px solid #333;
            margin-bottom: 20px;
            padding: 0 40px; /* Space for pointers */
        }

        .bar {
            width: 40px;
            background-color: #cbd5e1;
            border-radius: 4px 4px 0 0;
            position: relative;
            text-align: center;
            font-weight: bold;
            color: #555;
            transition: background-color 0.3s;
        }
        
        .bar span {
            position: absolute;
            top: -25px;
            width: 100%;
            left: 0;
        }

        /* The Water Container */
        #water-fill {
            position: absolute;
            bottom: 0;
            background-color: rgba(59, 130, 246, 0.5); /* Semi-transparent blue */
            z-index: 5;
            display: none; /* Hidden initially */
            border-top: 2px dashed #2563eb;
        }

        /* Pointers */
        .pointer {
            position: absolute;
            bottom: -40px;
            font-size: 24px;
            font-weight: bold;
            color: #dc2626; /* Red */
        }

        .controls {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }

        button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            background-color: #2563eb;
            color: white;
            border: none;
            border-radius: 5px;
        }

        button:disabled { background-color: #ccc; cursor: not-allowed; }
        button.reset { background-color: #4b5563; }

        .info-panel {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            width: 800px;
            display: flex;
            justify-content: space-between;
        }

        .explanation { width: 45%; }
        .stats { width: 45%; text-align: right; }
        
        .highlight { color: #2563eb; font-weight: bold; }
        
        /* Code Box */
        .code-box {
            margin-top: 20px;
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 8px;
            width: 800px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
        }
    </style>
</head>
<body>

    <h1>Container With Most Water (LeetCode 11)</h1>
    <p>Goal: Find two lines that form a container holding the most water.</p>

    <div class="container" id="chart-container">
        <div id="water-fill"></div>
        </div>

    <div class="controls">
        <button id="btn-next" onclick="nextStep()">Next Step</button>
        <button class="reset" onclick="resetSim()">Reset</button>
    </div>

    <div class="info-panel">
        <div class="explanation" id="expl-text">
            Click "Next Step" to start the Two-Pointer approach.
        </div>
        <div class="stats">
            <div>Current Width: <span id="stat-width" class="highlight">0</span></div>
            <div>Limiting Height: <span id="stat-height" class="highlight">0</span></div>
            <div>Current Area: <span id="stat-area" class="highlight">0</span></div>
            <div><strong>Max Area Found: <span id="stat-max" class="highlight" style="color: #dc2626;">0</span></strong></div>
        </div>
    </div>

    <div class="code-box">
<pre>
// C Solution
int maxArea(int* height, int heightSize) {
    int left = 0;
    int right = heightSize - 1;
    int max_area = 0;

    while (left < right) {
        // 1. Calculate dimensions
        int width = right - left;
        
        // Find shorter line (water spills over the shorter one)
        int h = height[left] < height[right] ? height[left] : height[right];
        
        int current_area = width * h;

        // 2. Update maximum
        if (current_area > max_area) {
            max_area = current_area;
        }

        // 3. Move the pointer of the shorter line inward
        // (Attempting to find a taller line to compensate for lost width)
        if (height[left] < height[right]) {
            left++;
        } else {
            right--;
        }
    }
    return max_area;
}
</pre>
    </div>

    <script>
        // Data Input
        const heights = [1, 8, 6, 2, 5, 4, 8, 3, 7];
        const containerWidth = 800;
        const padding = 40; // Side padding of container
        const availableWidth = containerWidth - (padding * 2);
        
        // State
        let left = 0;
        let right = heights.length - 1;
        let maxArea = 0;
        let step = 0; // 0: Calculate, 1: Move
        let isFinished = false;

        // DOM Elements
        const container = document.getElementById('chart-container');
        const waterFill = document.getElementById('water-fill');
        const ptrLeft = document.getElementById('pointer-left');
        const ptrRight = document.getElementById('pointer-right');
        const explText = document.getElementById('expl-text');
        
        // Stats
        const sWidth = document.getElementById('stat-width');
        const sHeight = document.getElementById('stat-height');
        const sArea = document.getElementById('stat-area');
        const sMax = document.getElementById('stat-max');
        const btnNext = document.getElementById('btn-next');

        // Setup
        function init() {
            // clear existing bars except water
            const bars = document.querySelectorAll('.bar');
            bars.forEach(b => b.remove());

            // Create bars
            heights.forEach((h, index) => {
                const bar = document.createElement('div');
                bar.className = 'bar';
                bar.style.height = (h * 30) + 'px'; // Scale height for visual
                bar.innerHTML = `<span>${h}</span>`;
                bar.id = `bar-${index}`;
                container.appendChild(bar);
            });

            // Position Pointers initially
            updatePointerVisuals(0); // Instant update
        }

        function getBarPosition(index) {
            const bar = document.getElementById(`bar-${index}`);
            return bar.offsetLeft + (bar.offsetWidth / 2);
        }

        function updatePointerVisuals(duration = 0.5) {
            const lPos = getBarPosition(left);
            const rPos = getBarPosition(right);

            // Animate pointers using GSAP
            gsap.to(ptrLeft, { left: lPos - 10, duration: duration, ease: "power2.out" }); // -10 to center
            gsap.to(ptrRight, { left: rPos - 10, duration: duration, ease: "power2.out" });
        }

        function nextStep() {
            if (isFinished) return;

            if (step === 0) {
                // PHASE 1: CALCULATE AREA
                const hLeft = heights[left];
                const hRight = heights[right];
                const width = right - left;
                const minHeight = Math.min(hLeft, hRight);
                const currentArea = width * minHeight;

                // Highlight bars being compared
                document.getElementById(`bar-${left}`).style.backgroundColor = '#64748b';
                document.getElementById(`bar-${right}`).style.backgroundColor = '#64748b';

                // Visualize Water
                const lBar = document.getElementById(`bar-${left}`);
                const rBar = document.getElementById(`bar-${right}`);
                
                // Get exact positions for water div
                const leftEdge = lBar.offsetLeft;
                const rightEdge = rBar.offsetLeft + rBar.offsetWidth;
                const waterWidth = rightEdge - leftEdge;
                
                waterFill.style.display = 'block';
                waterFill.style.left = leftEdge + 'px';
                waterFill.style.width = waterWidth + 'px';
                
                // Animate water rising
                gsap.fromTo(waterFill, 
                    { height: 0 }, 
                    { height: (minHeight * 30) + 'px', duration: 0.5, ease: "bounce.out" }
                );

                // Update Stats
                sWidth.innerText = width;
                sHeight.innerText = minHeight;
                sArea.innerText = currentArea;

                // Update Max logic
                if (currentArea > maxArea) {
                    maxArea = currentArea;
                    sMax.innerText = maxArea;
                    explText.innerHTML = `Area = ${width} (width) × ${minHeight} (shorter height) = <strong>${currentArea}</strong>.<br>New Maximum found!`;
                    // Flash max area
                    gsap.from(sMax, { scale: 1.5, color: "#00ff00", duration: 0.3 });
                } else {
                    explText.innerHTML = `Area = ${width} (width) × ${minHeight} (shorter height) = <strong>${currentArea}</strong>.<br>Not bigger than current max (${maxArea}).`;
                }

                step = 1; // Next click will move pointers
                btnNext.innerText = "Move Pointer";

            } else {
                // PHASE 2: MOVE POINTERS
                waterFill.style.display = 'none'; // Hide water
                
                // Reset bar colors
                document.getElementById(`bar-${left}`).style.backgroundColor = '#cbd5e1';
                document.getElementById(`bar-${right}`).style.backgroundColor = '#cbd5e1';

                const hLeft = heights[left];
                const hRight = heights[right];

                if (hLeft < hRight) {
                    explText.innerHTML = `Left height (${hLeft}) is smaller than Right (${hRight}).<br>We move <strong>Left</strong> to try and find a taller bar.`;
                    left++;
                } else {
                    explText.innerHTML = `Right height (${hRight}) is smaller or equal to Left (${hLeft}).<br>We move <strong>Right</strong> to try and find a taller bar.`;
                    right--;
                }

                updatePointerVisuals();

                // Check termination
                if (left >= right) {
                    isFinished = true;
                    btnNext.innerText = "Finished";
                    btnNext.disabled = true;
                    explText.innerHTML = `<strong>Finished!</strong> The pointers have met.<br>The Max Area is <strong>${maxArea}</strong>.`;
                } else {
                    step = 0;
                    btnNext.innerText = "Calculate Area";
                }
            }
        }

        function resetSim() {
            left = 0;
            right = heights.length - 1;
            maxArea = 0;
            step = 0;
            isFinished = false;
            
            sMax.innerText = 0;
            sArea.innerText = 0;
            sWidth.innerText = 0;
            sHeight.innerText = 0;
            explText.innerText = 'Click "Next Step" to start.';
            btnNext.innerText = "Next Step";
            btnNext.disabled = false;
            
            waterFill.style.display = 'none';
            document.querySelectorAll('.bar').forEach(b => b.style.backgroundColor = '#cbd5e1');
            
            updatePointerVisuals(1);
        }

        // Run
        init();

    </script>
</body>
</html>